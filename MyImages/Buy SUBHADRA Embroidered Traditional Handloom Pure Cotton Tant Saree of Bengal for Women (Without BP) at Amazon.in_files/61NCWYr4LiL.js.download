(function(r){var n=window.AmazonUIPageJS||window.P,x=n._namespace||n.attributeErrors,a=x?x("DetailPageAttachAssets",""):n;a.guardFatal?a.guardFatal(r)(a,window):a.execute(function(){r(a,window)})})(function(r,n,x){"use strict";r.when("A").register("attach-variant-registration",function(a){var b={};return{registerVariantFlag:function(a){if(b.hasOwnProperty(a))throw"Variant flag already registered";b[a]=!0},getVariantFlag:function(a){return b.hasOwnProperty(a)}}});"use strict";r.when("A").register("attach-baselink",
function(a){var b=null;r.when("BaseLinkFormHelper").execute(function(a){b=a});var k=function(a){n.ueLogError&&n.ueLogError({message:"msi - "+a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{createBaseLinkFormFields:function(a,g){return b?b.addBaseLinkFields(a,g):null},addLinkedWarranty:function(b,g,m){a.ajax("/gp/product/amazon-protect/base-link/services/warranty-service.html",{method:"post",params:b,timeout:1E3,success:function(a){a&&a.status&&"OK"===a.status&&g()},error:function(){m()}})},
obtainBaseItemCartId:function(b){a.ajax("/gp/product/amazon-protect/base-link/services/last-added-cart-item-id.html",{method:"post",timeout:1E3,success:function(a){a&&a.status&&a.lastAddedItemCartId?b(a.lastAddedItemCartId):k("Error while doing a call to last-added-cart-item-id.html. Status: "+a.status)},error:function(a,b,d){k("Error while doing a call to last-added-cart-item-id.html. Status: "+b+" . Error: "+d)}})},mSilogError:k}});"use strict";r.when("A").register("attach-external-atc-interceptor",
function(a){var b=a.$,k=[],e=[],g=!1,m=!1,d=function(){m=!0},c=function(a){var d=e.indexOf(a);-1<d&&(a=b("#attach_add_accessory_alert_"+d),d=b("#attach_add_accessory_button_"+d),a&&d&&(a.removeClass("aok-hidden"),d.addClass("aok-hidden")))};return{updateAttachModule:function(a){d&&(g?c(a):k.push(a))},loadAttachModule:function(a){if(m)for(g=!0,e=a;0<k.length;)a=k.shift(),c(a)},unloadAttachModule:function(){g=!1;e=[]},enableModule:d}});"use strict";r.when("A").register("attach-preinitiate-checkout",
function(a){return{getCartInitiateId:function(){return(new Date).getTime()},preinitiateCheckout:function(b){var k=a.$("#attach-desktop-sideSheet");var e=a.$("#attach_accessory_sheet");k=k.length?k:e;k.find("iframe#checkoutPrefetch").remove();b="/gp/cart/checkout-prefetch.html?\x26cartInitiateId\x3d"+b;e=document.createElement("iframe");e.setAttribute("src",b);e.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");e.setAttribute("name","checkoutPrefetch");e.setAttribute("id",
"checkoutPrefetch");k.append(e)}}});"use strict";r.when("A","attach-common","attach-variant-registration").register("attach-weblabs",function(a,b,k){function e(b){var d=a.$(b).val();b=[];if(d&&0<d.length){d=d.slice(1,-1).split(",");for(var c=0;c<d.length;c++){var m=d[c].trim();0<m.length&&b.push(m)}}return b}var g={},m=g.Selectors={CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",WEBLABS_TO_TRIGGER_ON_ADD_TO_CART:"#attach-weblabsToTriggerOnAddToCart",SHOW_ACCESSORY_COUPONS_DSS:"#attach-accessory-coupons-dss",
SHOW_ACCESSORY_COUPONS_MBS:"#attach-accessory-coupons-mbs",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",WTY_TWISTER_CONTAINER:"#warranty-twister-container",ATTACH_LD_SUPPORT:"#attach-ld-container",WTY_LD_SUPPORT:"#warranty-ld-launch"},d=g.Marketplaces={IN:"A21TJRUUN4KGV"};g.isWarrantyPaneSuppressed=function(){return a.$(m.ATTACH_MARKETPLACE_ID).val()===d.IN&&(!g.servicesInterstitialDeprecated()||b.hasAccessories())};
g.isShowAccessoryCouponsDssEnabled=function(){return b.elementExists(m.SHOW_ACCESSORY_COUPONS_DSS)};g.isShowAccessoryCouponsMbsEnabled=function(){return b.elementExists(m.SHOW_ACCESSORY_COUPONS_MBS)};g.isCoreFreeShippingMessageEnabled=function(){return b.elementExists(m.CORE_FREE_SHIPPING_MESSAGE)};g.isInstallmentsDssIntegrationEnabled=function(){return k.getVariantFlag("DP_INSTALLMENTS_DSS_231673:T1")};g.isAttachDebugParametersEnabled=function(){return 0<a.$(m.DEBUG_IS_DEBUG).length||0<a.$(m.DEBUG_QUERY_STRING).length};
g.isWarrantyTwisterPlusDesktopEnabled=function(){return 0<a.$(m.WTY_TWISTER_CONTAINER).length};g.isAttachLDSupportEnabled=function(){return b.elementExists(m.ATTACH_LD_SUPPORT)};g.isWarrantyLDSupportEnabled=function(){return b.elementExists(m.WTY_LD_SUPPORT)};g.servicesInterstitialDeprecated=function(){return b.elementExists("#attachSIDeprecated")};g.getAllWeblabsToTriggerClientSide=function(){return e(m.WEBLABS_TO_TRIGGER_ON_ADD_TO_CART).map(function(a){return a.split(":")})};g.triggerClientSideWeblabs=
function(){var a=g.getAllWeblabsToTriggerClientSide();if(0<a.length)for(var b=0;b<a.length;b++){var d=a[b];n.ue&&ue.count&&ue.count("Attach.ClientSideWeblab."+d[0]+":"+d[1],1);n.ue&&ue.trigger&&ue.trigger(d[0],d[1])}};return g});"use strict";r.when("A").register("attach-logging",function(a){var b={},k,e,g;b.NEXUS={PRODUCER_ID:"atch",ACCESSORY_IMPRESSIONS_PREFIX:"attach.AccessoryImpressions.",ACCESSORY_IMPRESSIONS_SCHEMA_VERSION:"10",ADD_ACCESSORY_PREFIX:"attach.AddAccessoryToCart.",ADD_ACCESSORY_SCHEMA_VERSION:"14",
ADD_WARRANTY_PREFIX:"attach.AddWarrantyToCart.",ADD_WARRANTY_SCHEMA_VERSION:"5",ADD_WARRANTY_FAILURE_PREFIX:"attach.AddWarrantyToCartFailure.",ADD_WARRANTY_FAILURE_SCHEMA_VERSION:"3",WARRANTY_IMPRESSION_PREFIX:"attach.WarrantyImpression.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"6",DSS_WARNING_MESSAGE_PREFIX:"attach.DssWarningMessages.",DSS_WARNING_MESSAGE_VERSION:"2",PROMOTION_CLAIMED_PREFIX:"attach.ClaimPromotion.",PROMOTION_CLAIMED_SCHEMA_VERSION:"2",ACCESSORY_TYPE:{ACCESSORY:"accessory",WARRANTY:"warranty"}};
b.FEATURES={DSS:"dss",MBS:"mbs"};b.CSM_METRICS={ATTACH_BASE_ATC_CLICK:"attachDesktopBaseATCClick",ATTACH_BASE_ATC_FAILURE:"ATTACH_DSS_ADD_BASE_FAILURE",ATTACH_BASE_ATC_SUCCESS:"ATTACH_DSS_ADD_BASE_SUCCESS",ATTACH_CART_CLICK:"ATTACH_DSS_CART_BUTTON_CLICK",ATTACH_CHECKOUT_CLICK:"ATTACH_DSS_CHECKOUT_CLICK",ATTACH_GET_CART_DESCRIPTION_FAILURE:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_FAILURE",ATTACH_GET_CART_DESCRIPTION_SUCCESS:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_SUCCESS",ATTACH_SHOW_LESS:"attachDesktopShowLess",
ATTACH_SHOW_MORE:"attachDesktopShowMore",ATTACH_SIDE_SHEET_CLOSE:"attachDesktopSideSheetClose",ATTACH_UPSELL_ATC_CLICK:"attachDesktopUpsellATCClick",ATTACH_UPSELL_ATC_FAILURE:"ATTACH_DSS_ADD_ACCESSORY_FAILURE",ATTACH_UPSELL_ATC_LATENCY:"attach_desktop_upsell_atc_latency",ATTACH_UPSELL_ATC_SUCCESS:"ATTACH_DSS_ADD_ACCESSORY_SUCCESS",MINI_DP_ATC:"attachDesktopMiniDPATC",MINI_DP_BACK:"attachDesktopMiniDPBack",MINI_DP_CANCEL:"attachDesktopMiniDPCancel",MINI_DP_CAROUSEL_THUMBNAIL_CHANGE:"attachDesktopMiniDPCarouselThumbnailChange",
MINI_DP_DWELL_TIME:"attach_desktop_mini_dp_dwell_time",MINI_DP_OPEN:"attachDesktopMiniDPOpen",ATTACH_MBS_BASE_ATC_CLICK:"AttachMbsBaseItemAtcClick",DSS_BASE_LD_ATC_CLICK:"attachDesktopBaseLightningDealAtcClick",MBS_BASE_LD_ATC_CLICK:"attachMobileBaseLightningDealAtcClick",ATTACH_BASE_LD_MISSING_TIMER:"attachBaseLightningDealMissingTimer",ATTACH_BASE_LD_PRESENT:"attachBaseLightningDeal",ATTACH_BASE_LD_WARRANTY_SUCCESS:"attachBaseLightningDealAddWarrantySuccess",ATTACH_BASE_LD_WARRANTY_FAILURE:"attachBaseLightningDealAddWarrantyFailure",
ATTACH_BASE_LD_DEAL_STATUS_ERROR:"attachBaseLightningDealStatusError"};b.ENDPOINTS={REF_TAG:"/gp/product/ajax-handlers/reftag.html?ref_\x3d",REF_TAG_IN:"/hctp/log/refMarker?ref_\x3d"};b.initialize=function(a,d){k=a;e=d;b.REF_TAGS={WARRANTY_IMPRESSION:"dp_atc_"+a+"_w_i_",WARRANTY_ADD_TO_CART:"dp_atc_"+a+"_w_y_"}};b.setPayloadBuilder=function(a){g=function(){var d=a();d.feature=k;d.obfuscatedMarketplaceId=e||n.ue_mid;d.producerId=b.NEXUS.PRODUCER_ID;d.requestId=b.getRandomHexString();return d}};b.getRandomHexString=
function(){return Date.now().toString(10)+Math.random().toString(16).substring(2,13)};b.log=function(a,d){n.ue&&n.ue.event&&n.ue.event(a,b.NEXUS.PRODUCER_ID,d,{ssd:!0})};b.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+b).val()||
null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+
b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};b.logAccessoryAddToCart=function(a){var d=b.NEXUS.ADD_ACCESSORY_PREFIX+b.NEXUS.ADD_ACCESSORY_SCHEMA_VERSION,c=g();c.type=b.NEXUS.ACCESSORY_TYPE.ACCESSORY;c.displayPosition=parseInt(a.index)+1;c.accessoryAsin=a.asin;c.accessoryAsinPrice=a.priceFormatted;c.accessoryItemCurrencySymbol=a.currencySymbol;c.accessoryItemPriceDecimal=a.priceDecimal;c.couponType=a.couponType;c.couponDecimal=a.couponDecimal;
c.dealType=a.dealType;c.dealPercentSavings=a.dealPercentSavings;c.dealDollarAmount=a.dealDollarAmount;c.categoryDisplayPosition=parseInt(a.categoryIndex)+1;c.categoryTitle=a.categoryTitle;c.displayPositionWithinCategory=parseInt(a.asinIndexWithinCategory)+1;b.log(c,d)};b.logAccessoryImpressions=function(a){var d=b.NEXUS.ACCESSORY_IMPRESSIONS_PREFIX+b.NEXUS.ACCESSORY_IMPRESSIONS_SCHEMA_VERSION,c=g();c.accessories=[];for(var e=0;e<a.length;e++){var f=a[e];c.accessories.push({displayPosition:parseInt(f.index)+
1,asin:f.asin,price:f.priceFormatted,currencySymbol:f.currencySymbol,priceDecimal:f.priceDecimal,couponType:f.couponType,couponDecimal:f.couponDecimal,dealType:f.dealType,dealPercentSavings:f.dealPercentSavings,dealDollarAmount:f.dealDollarAmount,categoryDisplayPosition:parseInt(f.categoryIndex)+1,categoryTitle:f.categoryTitle,displayPositionWithinCategory:parseInt(f.asinIndexWithinCategory)+1})}b.log(c,d)};b.logWarrantyAddToCart=function(a,d){var c=b.NEXUS.ADD_WARRANTY_PREFIX+b.NEXUS.ADD_WARRANTY_SCHEMA_VERSION;
d&&(c=b.NEXUS.ADD_WARRANTY_FAILURE_PREFIX+b.NEXUS.ADD_WARRANTY_FAILURE_SCHEMA_VERSION);var e=g();e.asin=a.asin;e.price=a.priceFormatted;e.warrantyCurrencySymbol=a.currencySymbol;e.warrantyPriceDecimal=a.priceDecimal;b.log(e,c);d||b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_ADD_TO_CART,a.asin)};b.logWarrantyImpression=function(a){var d=b.NEXUS.WARRANTY_IMPRESSION_PREFIX+b.NEXUS.WARRANTY_IMPRESSION_SCHEMA_VERSION,c=g();c.asin=a.asin;c.price=a.priceFormatted;c.warrantyCurrencySymbol=a.currencySymbol;c.warrantyPriceDecimal=
a.priceDecimal;b.log(c,d);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_IMPRESSION,a.asin)};b.logWarrantyRefTag=function(a,d){var c=g().baseAsin;b.logRefTag(a+c+"_"+d)};b.logSecondarySheetRefTag=function(a){var d=g().baseAsin;b.logRefTag(a+"_"+d)};b.logRefTag=function(g){"A21TJRUUN4KGV"===e?a.get(b.ENDPOINTS.REF_TAG_IN+g):a.get(b.ENDPOINTS.REF_TAG+g)};b.logMobileBaseAtc=function(a){b.logCount(b.CSM_METRICS.ATTACH_MBS_BASE_ATC_CLICK);a&&a.data&&"add-to-cart"===a.data.buttonID&&b.logCount("DetailPage_MobileApp_AddToCart")};
b.logMapleError=function(){n.ue&&n.ue.count&&n.ue.count("MAPLE::DSS::Error",(n.ue.count("MAPLE::DSS::Error")||0)+1)};b.logCount=function(a,b){n.ue&&n.ue.count&&(b=b||1,n.ue.count(a,(n.ue.count(a)||0)+b))};b.logError=function(a,b,c){n.ueLogError&&n.ueLogError(a,{logLevel:b||"ERROR",attribution:c||"DetailPageAttachAssets"})};b.logDSSWarningMessage=function(a){var d=b.NEXUS.DSS_WARNING_MESSAGE_PREFIX+b.NEXUS.DSS_WARNING_MESSAGE_VERSION,c=g();b.log({quantity:c.quantity.toString(),baseAsin:c.baseAsin,
warningMessage:a},d)};b.logPromotionClaimed=function(a){var d=b.NEXUS.PROMOTION_CLAIMED_PREFIX+b.NEXUS.PROMOTION_CLAIMED_SCHEMA_VERSION,c=g();c.asin=a.asin;c.accessoryCurrencySymbol=a.currencySymbol;c.accessoryPriceDecimal=a.priceDecimal;c.displayPosition=a.index+1;null!==a.couponType&&(c.promoDecimal=a.couponDecimal,c.promoDecimalType=a.couponType,c.promoType="coupon");b.log(c,d)};b.isFunction=function(a){return"function"===typeof a};b.beginLatencyCapture=function(a){b.isFunction(n.uet)&&n.uet("bb",
a,{wb:1})};b.endLatencyCapture=function(a){b.isFunction(n.uex)&&n.uex("ld",a,{wb:1})};return b});"use strict";r.when("A","attach-logging").register("attach-maple",function(a,b){var k={},e;k.initialize=function(){e=!1};k.loadBannerHTML=function(){var g=a.$.Deferred(),k={};e&&(k.cart=null);a.post("/gp/cobrandcard/dss-maple-banner.html",{params:k,success:function(a){g.resolve(a)},error:function(){b.logMapleError();g.resolve(null)}});return g.promise()};k.suppressMathBox=function(){e=!0};k.updateMathBox=
function(a){"undefined"!==typeof mapleMathBox&&null!==mapleMathBox&&mapleMathBox.updateMapleMath({totalCost:a})};return k});"use strict";r.when("A","attach-variant-registration","attach-logging").register("attach-common",function(a,b,k){function e(b){var f=g(b,t.UNIQ_ITEM_ASSOC_NAME),l=g(b,t.ITEM_ASSOC_TYPE_NAME),h=1,e=!1;null!==l&&(c.itemAssocTypeValue=b.find(t.INPUT_NAME+l+t.CLOSED_BRACKET).val(),c.itemAssocTypeValue===t.ATTACH_ITEM_ASSOC_TYPE_VALUE&&(e=!0));null!==f?e?(l=g(b,t.ITEM_ASSOC_NAME),
e=a.$("#attach-sessionId").val()+"-"+(new Date).getTime(),b.find(t.INPUT_NAME+f+t.CLOSED_BRACKET).val(e),b.find(t.INPUT_NAME+l+t.CLOSED_BRACKET).val(e),c.uniqueId=e):c.uniqueId=b.find(t.INPUT_NAME+f+t.CLOSED_BRACKET).val():(c.uniqueId=a.$("#attach-sessionId").val()+"-"+(new Date).getTime(),h=d(b,h),m(b,t.ITEM_ASSOC_NAME,c.uniqueId,h),h++,h=d(b,h),m(b,t.UNIQ_ITEM_ASSOC_NAME,c.uniqueId,h),h++,h=d(b,h),m(b,t.ITEM_ASSOC_TYPE_NAME,c.itemAssocTypeValue,h),h++);h=d(b,h);m(b,t.ITEM_ASSOC_PROPERTIES_NAME,
t.ITEM_ASSOC_PROPERTIES_VALUE,h)}function g(a,b){a=a.find(t.INPUT_VALUE+b+t.CLOSED_BRACKET);if(!a.length)return null;a=a[0].name.split(".");return 2<a.length?t.CUSTOM_VALUE_KEY+a[1]+"."+a[2]:null}function m(a,b,d,c){a.append('\x3cinput type\x3d"hidden" name\x3d"custom-name.1.'+c+'" value\x3d"'+b+'"/\x3e');a.append('\x3cinput type\x3d"hidden" name\x3d"custom-value.1.'+c+'" value\x3d"'+d+'"/\x3e')}function d(a,b){for(;0<a.find('input[name\x3d"custom-name.1.'+b+'"]').length||0<a.find('input[name\x3d"custom-value.1.'+
b+'"]').length;)b++;return b}var c={},t=c.ItemAssociationConstants={ITEM_ASSOC_NAME:"itemAssoc",UNIQ_ITEM_ASSOC_NAME:"UNIQ-itemAssoc",ITEM_ASSOC_TYPE_NAME:"itemAssocType",ATTACH_ITEM_ASSOC_TYPE_VALUE:"Attach",ITEM_ASSOC_RENDER_TYPE_NAME:"itemAssocRenderType",ITEM_ASSOC_RENDER_TYPE_VALUE:"renderAll",ITEM_ASSOC_PROPERTIES_NAME:"itemAssocProperties",ITEM_ASSOC_PROPERTIES_VALUE:"{\x26#34;QuantityEditable\x26#34;:\x26#34;1\x26#34;,\x26#34;QuantityInvarianceFactor\x26#34;:\x26#34;1\x26#34;}",CUSTOM_VALUE_KEY:"custom-value.",
INPUT_VALUE:"input[value\x3d'",INPUT_NAME:"input[name\x3d'",CLOSED_BRACKET:"']"},f=c.Marketplaces={IN:"A21TJRUUN4KGV"};c.uniqueId=null;c.itemAssocTypeValue="Attach";c.selectedBaseLightningDeal=!1;c.FailureModes={ERROR_500:1,RESUBMIT_BUY_BOX:2,TRANSITION_TO_HUC:3,UNBIND_ATC:4,REBIND_ATC:5};var w=c.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",DISCRIMINATED_OFFERS_ENABLED:"#attach-discriminated-offers-enabled"};c.buyButton=a.$(w.ADD_TO_CART_BUTTON);
c.reject=function(b,d){return c.rejectPromise(a.$.Deferred(),b,d)};c.rejectPromise=function(b,d,c){if(c&&c.count&&n.ue&&n.ue.count)if("string"===typeof c.count)n.ue.count(c.count,1);else if(a.$.isArray(c.count))for(var h=0;h<c.count.length;h++)n.ue.count(c.count[h],1);c&&c.information&&k.logError("string"===typeof c.information?{message:c.information}:c.information,c.level,c.attribution);return b.reject(d,c)};c.pipeJSON=function(a){try{return JSON.parse(a)}catch(u){return c.reject(null,{count:"ATTACH_DSS_JSON_PARSE_FAILURE"})}};
c.unescapeJson=function(a){if(!a)return null;a=a.replace(/\|\|/g,'"');return a=a.replace(/&pipe;/g,"||")};c.elementExists=function(b){return b?b instanceof a.$?0!==b.length:0!==a.$(b).length:!1};c.moduleExists=function(b){return(b=a.$("#"+b+"_feature_div").html())?0<b.trim().length:!1};c.isCurrencyOfPreferenceApplied=function(){return"true"===a.$("#attach-used-currency-of-preference").val()};c.hasWarranty=function(){return c.elementExists("#attachSIDeprecated")&&c.elementExists("#attach-warranty-pane")||
0<a.$("#warrantyEscapedJson").length};c.hasMonthlyWarranty=function(){return c.elementExists("#attach-monthly-warranty")};c.isMultiQuantityDeal=function(){return 0<a.$("#dealOrderQuantityDropdown").length};c.hasAccessories=function(){return c.elementExists("#attach-asin-list")};c.isDiscriminatedOffersEnabled=function(){return c.elementExists(w.DISCRIMINATED_OFFERS_ENABLED)?"true"===a.$(w.DISCRIMINATED_OFFERS_ENABLED).val():a.$(w.ATTACH_MARKETPLACE_ID).val()===f.IN};c.submitATCForm=function(){var b=
c.getAtcForm();c.isDiscriminatedOffersEnabled()&&e(b);k.logCount(k.CSM_METRICS.ATTACH_BASE_ATC_CLICK);b=b.serializeArray();b.push({name:"isDSSAjax",value:"1"});b=a.$.param(b);b=a.$.post("/gp/product/handle-buy-box/ref\x3ddp_start-bbf_1_glance",b);b.fail(function(a){k.logCount(k.CSM_METRICS.ATTACH_BASE_ATC_FAILURE);k.logError({message:"Base product ATC call failed: "+a.status})});a.trigger("attach:add-base-to-cart",b)};c.getAtcForm=function(){return c.buyButton.closest("form")};c.isAttachMTAWeblabOn=
function(){return!1};return c});"use strict";r.when("A","attach-common","attach-logging","attach-baselink","attach-weblabs","attach-variant-registration").register("attach-desktop-warranty-pane",function(a,b,k,e,g,m){var d={name:"warranty"},c=d.Selectors={ASIN:"#attach-warranty-asin",PRICE_FORMATTED:"#attach-accessory-price-warranty",PRICE_AMOUNT:"#attach-accessory-price-warranty-amount",BASE_ASIN:"#ASIN",MARKETPLACE_ID:"#attach-marketplaceId",BASE_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",
ATC_QUANTITY:"#quantity",ATC_WARRANTY:".attach-warranty-input",JSON_DATA:"#warrantyEscapedJson",PANE:"#attach-warranty-pane",PANE_IMAGE:"#attach-sheet-warranty-image",PANE_UPSELL_IMAGE:"#attach-sheet-warranty-upsell-image",PANE_ADD_BUTTON:"#attachSiAddCoverage",PANE_NO_BUTTON:"#attachSiNoCoverage",PANE_WARRANTY_TITLE:"#attach-warranty-displayTitle",PANE_EXPERIMENT_DISPLAY:"#attach-warranty-experiment-display",PANE_REGULAR_DISPLAY:"#attach-warranty-display",PANE_LD:"#attach-warranty-pane-ld",PANE_ADD_BUTTON_LD:"#attachSiAddCoverage-ld",
PANE_NO_BUTTON_LD:"#attachSiNoCoverage-ld",WTY_TWISTER_WTY_OPTION:".warranty-twister-box-group-warranty-option"},n;d.getWarrantyLoggingPayload=function(){var d=a.$(c.ASIN).val(),e=a.$(c.PRICE_FORMATTED),k=a.$(c.PRICE_AMOUNT);return!g.servicesInterstitialDeprecated()&&b.elementExists(k)?{asin:d,priceFormatted:e.text().trim(),priceDecimal:parseFloat(k.val())||null,currencySymbol:a.$(c.BASE_CURRENCY_SYMBOL).val()||null}:{asin:d,priceFormatted:e.text().trim(),priceDecimal:null,currencySymbol:null}};d.appendWarrantyToATCForm=
function(d,k){if(a.$(c.BASE_ASIN).val()&&d&&k){var f=b.getAtcForm();f.append('\x3cinput type\x3d"hidden" id\x3d"useABBHandler" class\x3d"attach-warranty-input" name\x3d"useABBHandler" value\x3d"1" /\x3e');var u=1;g.isWarrantyTwisterPlusDesktopEnabled()&&(u=a.$(c.WTY_TWISTER_WTY_OPTION).length+1);u=f.find("input[name^\x3d'offeringID']").length+u;var l=a.$(c.ATC_QUANTITY).val()||1,h="quantity."+u,m="asin."+u;f.find('input[name\x3d"'+h+'"]').remove();f.find('input[name\x3d"'+m+'"]').remove();f.append('\x3cinput type\x3d"hidden" id\x3d"'+
h+'" name\x3d"'+h+'" value\x3d"'+l+'" class\x3d"attach-warranty-input" /\x3e');f.append('\x3cinput type\x3d"hidden" id\x3d"'+m+'" name\x3d"'+m+'" value\x3d"'+d+'" class\x3d"attach-warranty-input" /\x3e');f.append('\x3cinput type\x3d"hidden" id\x3d"offeringID.'+u+'" name\x3d"offeringID.'+u+'" value\x3d"'+k+'" class\x3d"attach-warranty-input"/\x3e');d=f.find('input[name\x3d"itemCount"]');0===d.length?f.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+u+'"\x3e'):d[0].value=u;a.$("#atch__bl").length&&
e.createBaseLinkFormFields(u+1,f)}};d.clearWarrantyFromATCForm=function(){b.getAtcForm().find(c.ATC_WARRANTY).remove()};d.load=function(f){if(g.servicesInterstitialDeprecated()){if(b.elementExists(c.PANE))a.$(c.PANE).removeClass("aok-hidden");else return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"});if(g.isAttachLDSupportEnabled()&&g.isWarrantyLDSupportEnabled()&&b.selectedBaseLightningDeal)if(b.elementExists(c.PANE_LD))a.$(c.PANE+", "+c.PANE_LD).toggleClass("aok-hidden");
else return b.reject(b.FailureModes.UNBIND_ATC);b.elementExists(c.PANE_EXPERIMENT_DISPLAY)&&a.$(c.PANE_EXPERIMENT_DISPLAY).remove()}else{if(b.elementExists(c.JSON_DATA)){var e=b.unescapeJson(a.$(c.JSON_DATA).val());e=JSON.parse(e)}return e?d.renderClientSide(f,e):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"})}};d.renderClientSide=function(b,d){var c="",f=d.baseASIN,e="dp_atch_dss_w_lm_"+f+"_"+d.asin,h="dp_atch_dss_w_r_"+f+"_"+d.asin;f="dp_atch_dss_w_lm_"+f+"_"+
d.asin;var g=a.$("#stringTranslation-si-warranty-title").val(),q=a.$("#stringTranslation-si-accident-protection").val(),z=a.$("#stringTranslation-si-from").val(),k=a.$("#stringTranslation-si-rating-out-of-5-stars").val(),m=a.$("#stringTranslation-item-added-to-cart").val(),n=a.$("#stringTranslation-desktop-attach-accessory-failed-add-to-cart").val(),D=a.$("#stringTranslation-desktop-attach-accessory-retry").val(),t=a.$("#stringTranslation-si-add-coverage").val(),r=a.$("#stringTranslation-si-no-thanks").val(),
w=a.$("#stringTranslation-services-bundle-detail-link").val();c+='   \x3cdiv id\x3d"attach-warranty-pane" class\x3d"a-section"\x3e\n       \x3cdiv id\x3d"attach-warranty" class\x3d"a-section attach-sidesheet-card"\x3e\n           \x3cinput type\x3d"hidden" name\x3d"" value\x3d"'+d.asin+'" id\x3d"attach-warranty-asin"\x3e\n           \x3ch1 class\x3d"a-size-medium a-spacing-none a-color-base a-text-center"\x3e'+g+'\x3c/h1\x3e\n           \x3chr class\x3d"a-spacing-base a-spacing-top-small a-divider-normal attach-warranty-divider"\x3e\n           \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n';
null!==d.thumbImage&&(c+='                \x3cdiv class\x3d"a-column a-span2"\x3e\n                    \x3cimg id\x3d"attach-sheet-warranty-image" src\x3d"" data-image-url\x3d"'+d.thumbImage+'" class\x3d"attach-accessory-image"\x3e\n                \x3c/div\x3e\n');c+='                \x3cdiv class\x3d"a-column a-span10 a-span-last"\x3e\n                    \x3ca class\x3d"a-size-large a-spacing-micro a-link-normal a-color-base" id\x3d"attach-warranty-displayTitle" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
d.asin+"/ref\x3d"+e+'"\x3e\n                        \x3cstrong\x3e'+(null!==d.displayTitle?d.displayTitle:q.replace("${brandName}",d.brandName))+'\x3c/strong\x3e\n                    \x3c/a\x3e\n                    \x3cbr\x3e\n                    \x3cspan class\x3d"a-size-base a-color-secondary"\x3e'+z+" "+d.merchantName+"\x3c/span\x3e\n";Number(d.averageRating)&&Number(d.numReviews)&&Number(d.numFullStars)&&"boolean"===typeof d.hasHalfStar&&(e=k.replace("${averageRating}",d.averageRating),c+='                    \x3cdiv class\x3d"a-icon-row a-spacing-micro"\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+
d.asin+"/ref\x3d"+h+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            \x3ci class\x3d"a-icon a-icon-star a-star-'+d.numFullStars+(d.hasHalfStar?"-5":"")+'"\x3e\x3cspan class\x3d"a-icon-alt"\x3e'+e+'\x3c/span\x3e\x3c/i\x3e\n                        \x3c/a\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+d.asin+"/ref\x3d"+h+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            '+d.numReviews+"\n                        \x3c/a\x3e\n                    \x3c/div\x3e\n");
null!==d.buyingPriceAmount&&(c+='                    \x3cinput id\x3d"attach-accessory-price-warranty-amount" type\x3d"hidden" value\x3d"'+d.buyingPriceAmount+'"\x3e\n');c+='                    \x3cspan id\x3d"attach-accessory-price-warranty" class\x3d"a-size-large a-color-base attach-warranty-price"\x3e'+d.formattedBuyingPrice+'\x3c/span\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"a-row"\x3e\n                \x3cdiv class\x3d"a-column a-span12"\x3e\n                    \x3cdiv id\x3d"warrantyBulletRowWrapper" class\x3d"a-section"\x3e\n                        \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n                            \x3cul class\x3d"a-unordered-list a-vertical a-spacing-none"\x3e\n';
for(h=0;h<d.bulletPoints.length;h++)c+='                                \x3cli\x3e\x3cspan class\x3d"a-list-item"\x3e'+d.bulletPoints[h].text+"\x3c/span\x3e\x3c/li\x3e\n";c+='                            \x3c/ul\x3e\n                        \x3c/div\x3e\n                        \x3cdiv id\x3d"attachWarrantyButtonWrapper" class\x3d"a-section a-box-inner a-color-alternate-background"\x3e\n                            \x3cdiv id\x3d"attachWarrantyButtonInnerWrapper" class\x3d"a-section a-box-inner"\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_alert_warranty" class\x3d"a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base a-color-success"\x3e'+
m+'\x3c/span\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_error_warranty" class\x3d"a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live\x3d"assertive" role\x3d"alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base"\x3e\n                                                '+
n+'\x3cbr\x3e\n                                            \x3c/span\x3e\n                                            \x3ca class\x3d"a-link-normal attach-add-to-cart-retry" href\x3d"#"\x3e\n                                                '+D+'\n                                            \x3c/a\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cspan class\x3d"attach_add_accessory_spinner_warranty a-spinner a-spinner-small attach-spinner aok-hidden"\x3e\x3c/span\x3e\n                                \x3cdiv class\x3d"a-section attach-warranty-button-row"\x3e\n                                    \x3cdiv class\x3d"a-button-stack"\x3e\n                                        \x3cspan id\x3d"attachSiAddCoverage" class\x3d"a-button a-button-primary attach-si-add-client"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiAddCoverage-announce" data-asin\x3d"'+
d.asin+'" data-offering-id\x3d"'+d.oid+'" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+t+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                        \x3cspan id\x3d"attachSiNoCoverage" class\x3d"a-button"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiNoCoverage-announce" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+
r+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3ca class\x3d"a-link-normal" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
d.asin+"/ref\x3d"+f+'"\x3e\n                '+w+"\n            \x3c/a\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n";b.$container.append(c)};d.onAttachAddBaseToCart=function(a){a.always(d.clearWarrantyFromATCForm)};d.setup=function(f){a.$(c.PANE).hide();var m=a.$(c.PANE_IMAGE).attr("data-image-url");a.$(c.PANE_IMAGE).attr("src",m);a.$(c.PANE_ADD_BUTTON).click(function(){var c=a.$(this).find("button");g.servicesInterstitialDeprecated()&&(c=a.$(this).find("[data-asin]"));var e=c.attr("data-asin");c=
c.attr("data-offering-id");d.appendWarrantyToATCForm(e,c);k.logWarrantyAddToCart(d.getWarrantyLoggingPayload());g.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.submitATCForm();f.next()});a.$(c.PANE_NO_BUTTON).click(function(){g.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.submitATCForm();f.next()});g.isAttachLDSupportEnabled()&&g.isWarrantyLDSupportEnabled()&&(a.$(c.PANE_ADD_BUTTON_LD).click(function(){e.obtainBaseItemCartId(function(b){var g=a.$(c.PANE_ADD_BUTTON_LD).find("input");
b={warrantyAsin:g.attr("data-asin"),offeringId:g.attr("data-offering-id"),addWarranty:1,quantity:1,baseItemCartId:b};e.addLinkedWarranty(b,function(){k.logCount(k.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_SUCCESS);new Promise(d.updateCart);f.next()},function(){k.logCount(k.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_FAILURE);f.next()})})}),a.$(c.PANE_NO_BUTTON_LD).click(function(){f.next()}));a.off("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",d.onAttachAddBaseToCart)};d.show=
function(){b.selectedBaseLightningDeal?g.isAttachLDSupportEnabled()&&g.isWarrantyLDSupportEnabled()&&b.selectedBaseLightningDeal&&a.$(c.PANE_LD).show():a.$(c.PANE).removeClass("aok-hidden");a.$(c.PANE).fadeIn(400,d.setFocus);k.logWarrantyImpression(d.getWarrantyLoggingPayload());n=Date.now()};d.hide=function(){a.$(c.PANE+", "+c.PANE_LD).fadeOut();k.logCount(k.CSM_METRICS.WARRANTIES_DWELL_TIME,Math.floor((Date.now()-n)/1E3))};d.setFocus=function(){a.$(c.PANE_WARRANTY_TITLE).get(0).focus()};d.updateCart=
function(){a.$.get("/gp/navigation/ajax/dynamic-menu.html?cartItems\x3dcart").done(function(a){a&&a.cartItems&&a.cartItems.count&&r.when("nav.setCartCount").execute(function(b){b(a.cartItems.count)})})};return d});"use strict";r.when("A","attach-common","attach-weblabs","attach-maple","attach-logging","attach-variant-registration").register("attach-desktop-accessories-pane",function(a,b,k,e,g,m){var d={name:"accessories"},c=!0,t=!1,f,w=!1,v=!1,u,l=d.Endpoints={RENDER:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-render-desktop.html",
GET_CART_DESCRIPTION:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-get-cart-description.html",ADD_ACCESSORY_TO_CART:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-add-to-cart.html",PROCEED_TO_CHECKOUT:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3dProceed"},h=d.Selectors={BASE_ASIN:"#attach-baseAsin",QUANTITY:"#quantity",ACCESSORY_ASIN_LIST:"#attach-asin-list",MARKETPLACE_ID:"#attach-marketplaceId",LANGUAGE_OF_PREFRENCE:"#attach-languageOfPreference",PANE:"#attach-accessory-pane",
PANE_CLOSE_BUTTON:"#attach-close_sideSheet-link",PANE_CART_BASE_ALERT_IMAGE_AREA:"#attach-added-to-cart-alert-and-image-area",PANE_CART_BASE_ALERT:"#attachDisplayAddBaseAlert",PANE_CART_BASE_SUCCESS_ALERT:"#attachAddBaseItemSuccessAlert",PANE_CART_BASE_ERROR_ALERT:"#attachAddBaseItemErrorAlert",PANE_CART_BASE_INITIAL_IMAGE:"#attach-sheet-view-base-product-image",PANE_CART_BASE_HUC_IMAGE:".huc-image-wrapper",PANE_CART_BLOCK:".attach-primary-atc-confirm-box",PANE_CART_BLOCK_INNER:"#attach-added-to-cart-message",
PANE_CART_BLOCK_SUBTOTAL_LABEL:"#attach-accessory-cart-total-string",PANE_CART_BLOCK_SUBTOTAL_PRICE:"#attach-accessory-cart-subtotal",PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",PANE_CART_BLOCK_PROCEED_TO_CHECKOUT:"#attach-accessory-proceed-to-checkout-text",PANE_CART_SPINNER:"#attach-add-to-cart-message-spinner",PANE_VIEW_CART_BUTTON:"#attach-sidesheet-view-cart-button",PANE_CHECKOUT_BUTTON:"#attach-sidesheet-checkout-button",PANE_HUC_MESSAGE:".attach-add-to-cart-message-card",
PANE_ACCESORIES_CARD:"#attach-accessories",PANE_CATEGORIZED_ACCESSORIES_TILES_CARD:"#attach-categorized-accessories-tiles",PANE_ACCESSORY_RETRY_BUTTON:".attach-add-to-cart-retry",PANE_ACCESSORY_ADD_DECLARATIVES:'.a-declarative[data-action\x3d"attach-accessory-add"]',PANE_ACCESSORY_IMAGE:".attach-accessory-image",PANE_ACCESSORY_ASIN:".attach-accessory-asin",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SPINNER_PREFIX:"#attach_add_accessory_spinner_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",
PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_FIRST_ASIN:"#attach_accessory_dp_1",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",PANE_ACCESSORY_TITLE:".attach-accessory-title",PANE_ACCESSORY_TILE_ITEM:".attach-accessory-tile",PANE_ACCESSORY_TILE_ITEM_PREFIX:"#attach-accessory-tile-",PANE_ACCESSORY_CAROUSEL:"#attach-accessories .a-carousel-container",PANE_ACCESSORY_CARD:"#attach-accessories.card-expandable",PANE_ACCESSORY_CARD_SEE_MORE:".card-toggle-see-more",
PANE_ACCESSORY_CARD_SEE_LESS:".card-toggle-see-less",PANE_ACCESSORY_CARD_PEEK_CONTENT:".card-peek-content",PANE_ACCESSORY_CARD_EXPAND_CONTENT:".card-expand-content",PANE_MAPLE_SLOT:"#maple-dss-slot",PANE__DATA_CATEGORY_VIEW:"categoryView",PANE__DATA_ASIN_INDEX:"asinindex",PANE_ACCESSORY_COUPON:".attach-accessory-coupon",PANE_ACCESSORY_COUPON_PREFIX:"#attach-accessory-coupon-",PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS:".attach-coupon-unclipped",PANE_ACCESSORY_COUPON_CLIPPED_CLASS:".attach-coupon-clipped",
PANE_ACCESSORY_COUPON_ERROR_CLASS:".attach-coupon-error",PANE_ACCESSORY_COUPON_BADGE_CLASS:".attach-coupon-short-badge",PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS:".attach-coupon-badge-unclipped",PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS:".attach-coupon-badge-clipped",PANE_ACCESSORY_LIGHTNING_DEAL:".attach-accessory-lightning-deal",PANE_ACCESSORY_LIGHTNING_DEAL_PREFIX:"#attach-accessory-lightning-deal-",PANE_ACCESSORY_LIGHTNING_DEAL_JOIN_WAITLIST_PREFIX:"#attach-accessory-deal-on-waitlist-",PANE_ACCESSORY_CSRF_TOKEN:"#attach-accessory-deal-csrf-token",
DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString"},p=d.AccessoryAddStatus={INITIAL:0,ADDING:1,SUCCESS:2,ERROR:3};d.setShouldIncludeMaple=function(a){t=a};d.load=function(d){r.now("attach-external-atc-interceptor").execute(function(a){f=a});a.trigger("LOADED_ACCESSORIES_PANE_SUCCESSFULLY");var q=a.$.Deferred();r.now("dp-util-cookie").execute(function(d){d&&d("session-id")!==a.$("#attach-sessionId").val()&&b.rejectPromise(q,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_INVALID_SESSION_ID",
information:"Unexpected session ID received; expected "+a.$("#attach-sessionId").val()+" but cookie value was "+d("session-id")})});var c={attachAccessoryAsinList:a.$(h.ACCESSORY_ASIN_LIST).val(),marketplaceId:a.$(h.MARKETPLACE_ID).val(),asin:a.$(h.BASE_ASIN).val(),deviceType:"desktop",attachWeblabsToTrigger:[]};k.isAttachDebugParametersEnabled()&&(c.isDebug=a.$(h.DEBUG_IS_DEBUG).val(),c.queryString=a.$(h.DEBUG_QUERY_STRING).val());c=a.$.param(c,!0);c=a.$.post(l.RENDER,c);if(t){b.isCurrencyOfPreferenceApplied()&&
e.suppressMathBox();var m=e.loadBannerHTML()}a.$.when(c,m).done(function(c,e){var f=a.$(c[0].trim()),z=!f.is(h.PANE);f=0===f.find(h.PANE_ACCESSORY_ASIN).length;z||f?b.rejectPromise(q,b.FailureModes.TRANSITION_TO_HUC,{count:["ATTACH_DSS_RENDER_FAILURE","ATTACH_DSS_RENDER_FAILURE_INVALID_HTML"],information:"Failed to render DSS: isPaneMissing\x3d"+z+" isEmptyAccessoryList\x3d"+f}):(d.$container.append(a.$(c[0]).get(0)),e&&0<e.trim().length&&(e=a.$(e),c=e.not("script"),e=e.filter("script"),b.elementExists(h.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)?
c.insertAfter(h.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD):c.insertAfter(h.PANE_ACCESORIES_CARD),c.wrap('\x3cdiv id\x3d"maple-dss-slot"\x3e\x3cdiv id\x3d"maple-dss-card" class\x3d"a-section attach-sidesheet-card"\x3e\x3c/div\x3e\x3c/div\x3e'),e.each(function(){a.$.globalEval(this.innerHTML)}),g.logCount("ATTACH_DSS_MAPLE_RENDERED")),q.resolve())}).fail(function(){b.rejectPromise(q,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_RENDER_FAILURE",information:"Failed to render DSS: network request failed"})});
return q.promise()};d.onAttachAddBaseToCart=function(a){c=!1;a.pipe(d.handleAddBaseAndGetCartDescription).pipe(b.pipeJSON).pipe(d.handleCartDescription).fail(function(a,q){d.sheet.fail(a||b.FailureModes.ERROR_500,q)})};d.runOnceSetup=function(){w||(w=!0,a.declarative("attach-accessory-add","click",function(b){var c=b.$currentTarget,q=b.data,e=q.a,f=q.oid;q=q.isLightningDeal;g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_CLICK);g.beginLatencyCapture(g.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY);b=!0===a.$(h.PANE_CATEGORIZED_ACCESSORIES_CARD).data(h.PANE__DATA_CATEGORY_VIEW)?
a.$(b.$target).data(h.PANE__DATA_ASIN_INDEX):a.$(h.PANE_ACCESSORY_ADD_DECLARATIVES).index(c);q?d.addAccessoryToCartWithLightningDeal(b):d.addAccessoryToCart(e,f,b)}))};d.setup=function(b){d.runOnceSetup();a.$(h.PANE).hide();d.sheet=b;a.off("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.$(h.PANE_VIEW_CART_BUTTON).click(d.viewCart);a.$(h.PANE_CHECKOUT_BUTTON).click(d.proceedToCheckout);a.$(h.PANE_ACCESSORY_RETRY_BUTTON).click(function(){var b=
a.$(this).attr("data-asin"),c=a.$(this).attr("data-oid"),q=a.$(this).attr("data-idx");d.addAccessoryToCart(b,c,q)});a.$(h.PANE).find(h.PANE_CLOSE_BUTTON).appendTo(h.PANE_CART_BLOCK);a.$(h.PANE_CLOSE_BUTTON).click(b.next);a.$(h.PANE_ACCESSORY_IMAGE).each(function(){a.$(this).attr("src",a.$(this).attr("data-image-url"))});k.isShowAccessoryCouponsDssEnabled()&&d.initializeCoupons();a.$(h.PANE_ACCESSORY_LIGHTNING_DEAL).each(function(){var b=a.$(this).data().idx;d.updateLightningDealTimer(b);d.initializeLightningDealStatusRefresher(b)})};
d.show=function(){k.isAttachLDSupportEnabled()&&b.selectedBaseLightningDeal||!c||b.submitATCForm();u=Date.now();a.$(h.PANE).css({opacity:0}).show().animate({opacity:1},500,"linear",d.setFocus);if(k.isAttachLDSupportEnabled()&&b.selectedBaseLightningDeal)a.$(h.PANE_CART_BLOCK).addClass("aok-hidden"),a.$("#attach-accessory-pane").css("height",a.$(n).height()-161);else{var q=a.$(h.PANE_CART_BLOCK_INNER);q.find("div").addClass("aok-hidden");q.append(a.$(h.PANE_CART_SPINNER).removeClass("aok-hidden"))}d.initializeAccessoriesDisplay();
r.now("attach-categorized-cards").execute(function(a){a!==x&&a.initializeCategorizedCards()})};d.hide=function(){a.$(h.PANE).hide();a.$(h.PANE_CART_SPINNER).addClass("aok-hidden");a.$(h.PANE_HUC_MESSAGE).remove();a.$(h.PANE_ACCESSORY_ASIN).each(function(b,c){(c=a.$(c).data(h.PANE__DATA_ASIN_INDEX))&&(b=c);d.updateAccessoryStatus(b,p.INITIAL)});a.trigger("RESET_SECONDARY_SIDE_SHEET_MODULE");f&&f.unloadAttachModule();g.logCount(g.CSM_METRICS.ACCESSORIES_DWELL_TIME,Math.floor((Date.now()-u)/1E3));a.trigger("aloha:detailPage:reappear");
c=!0};d.setFocus=function(){a.$(h.PANE_ACCESSORY_FIRST_ASIN).length&&a.$(h.PANE_ACCESSORY_FIRST_ASIN).get(0).focus()};d.viewCart=function(){g.logCount(g.CSM_METRICS.ATTACH_CART_CLICK);document.location=""};d.proceedToCheckout=function(){g.logCount(g.CSM_METRICS.ATTACH_CHECKOUT_CLICK);document.location=v?l.PROCEED_TO_CHECKOUT+"\x26cartInitiateId\x3d"+v+"\x26ref_\x3ddp_atch_dss_proceed":l.PROCEED_TO_CHECKOUT+"\x26ref_\x3ddp_atch_dss_proceed"};d.updateNavCartDisplayQuantity=function(b){var d=Number(b);
b=isNaN(d)?"":100>d?b:"99+";a.$("#nav-cart-count").toggleClass("nav-cart-0",0===d).toggleClass("nav-cart-1",1<=d&&10>d).toggleClass("nav-cart-10",10<=d&&20>d).toggleClass("nav-cart-20",20<=d&&100>d).toggleClass("nav-cart-100",100<=d).text(b)};d.handleAddBaseAndGetCartDescription=function(c){g.logCount(g.CSM_METRICS.ATTACH_BASE_ATC_SUCCESS);c=a.$(c);d.renderHUCFeedback(c);d.renderBaseAddStatusIcon(c);if(f)try{var q=a.$(h.PANE_ACCESSORY_ASIN).map(function(){return this.value}).get();f.loadAttachModule(q)}catch(C){r.logError(C,
"Could not update ABB/DSS external interceptor: ","ERROR","attach-desktop-accessories-pane")}q={marketplaceId:a.$(h.MARKETPLACE_ID).val(),asin:a.$(h.BASE_ASIN).val(),languageOfPreference:a.$(h.LANGUAGE_OF_PREFRENCE).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val()};return a.$.post(l.GET_CART_DESCRIPTION,q).pipe(null,function(a,d,c){r.logError(Error(d),"AJAX cart description call failed: ","ERROR","attach-desktop-accessories-pane");return b.reject(null,{count:g.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_FAILURE})})};
d.handleCartDescription=function(c){try{var q=isNaN(parseInt(c.totalPrice)),f=isNaN(parseInt(c.itemQuantity)),l=!a.$.isArray(c.includedAsins),m=0===c.formattedTotalPrice.trim().length,u=0===c.cartSubtotalString.trim().length,p=0===c.itemQuantityString.trim().length,n=q||f||l;m||u||p;if(n)throw Error("Received invalid cart description: hasInvalidCartTotalPrice\x3d"+q+" hasInvalidCartItemQuantity\x3d"+f+" hasInvalidCartIncludedAsins\x3d"+l+" hasInvalidCartFormattedTotalPrice\x3d"+m+" hasInvalidCartSubtotal\x3d"+
u+" hasInvalidCartQuantity\x3d"+p);d.updateNavCartDisplayQuantity(c.itemQuantity);a.$(h.PANE_CART_BLOCK_SUBTOTAL_LABEL).html(c.cartSubtotalString);a.$(h.PANE_CART_BLOCK_SUBTOTAL_PRICE).html(c.formattedTotalPrice);a.$(h.PANE_CART_BLOCK_PROCEED_TO_CHECKOUT).html(c.itemQuantityString);a.$("#attach-customerId").val()&&r.when("attach-preinitiate-checkout").execute(function(a){v=a.getCartInitiateId();a.preinitiateCheckout(v)});c.coreFreeShippingMessage&&a.$(h.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(c.coreFreeShippingMessage);
t&&e.updateMathBox(Number(c.totalPrice));k.isAttachLDSupportEnabled()&&b.selectedBaseLightningDeal||(a.$(h.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(h.PANE_CART_SPINNER).addClass("aok-hidden"));setTimeout(d.revealHUCFeedback,200);r.when("EWC").execute(function(a){a.refresh()});g.logCount(g.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_SUCCESS);return c}catch(E){return r.logError(E,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane"),b.reject(null,
{count:"ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE"})}};d.updateAccessoryStatus=function(b,d){a.$(h.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).toggleClass("aok-hidden",d!==p.INITIAL);a.$(h.PANE_ACCESSORY_ADD_SPINNER_PREFIX+b).toggleClass("aok-hidden",d!==p.ADDING);a.$(h.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).toggleClass("aok-hidden",d!==p.SUCCESS);a.$(h.PANE_ACCESSORY_ADD_ERROR_PREFIX+b).toggleClass("aok-hidden",d!==p.ERROR);a.$("#tile-add-accessory-badge-"+b).toggleClass("aok-hidden",d!==p.SUCCESS);a.$("#attach-accessory-tile-"+
b).toggleClass("in-cart",d===p.SUCCESS)};d.addAccessoryToCart=function(c,e,f){e={marketplaceId:a.$(h.MARKETPLACE_ID).val(),asin:a.$(h.BASE_ASIN).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val(),accessoryItemAsin:c,accessoryItemOfferingId:e,languageOfPreference:a.$(h.LANGUAGE_OF_PREFRENCE).val(),accessoryItemQuantity:a.$(h.QUANTITY).val(),accessoryItemPrice:a.$("#attach-accessory-base-price-"+f).val(),accessoryMerchantId:a.$("#attach-accessory-merchantId-"+
f).val(),accessoryProductGroupId:a.$("#attach-accessory-product-category-code-"+f).val()};if(b.isDiscriminatedOffersEnabled()){var q={};q=b.isAttachMTAWeblabOn()?{itemAssociationGroup:'{"parentAsin":"'+e.asin+'","type":"Attach","renderType":"renderAll","constraintList":[{"mutuallyInclusive":false,"type":"DELETE"}]}'}:{itemAssoc:b.uniqueId,itemAssocType:b.itemAssocTypeValue,itemAssocRenderType:"renderAll"};e.keyValuePairs=JSON.stringify(q)}d.updateAccessoryStatus(f,p.ADDING);a.$.post(l.ADD_ACCESSORY_TO_CART,
e).pipe(b.pipeJSON).pipe(d.handleCartDescription).pipe(function(q){if(-1===a.$.inArray(c,q.includedAsins))return b.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});d.updateAccessoryStatus(f,p.SUCCESS);g.logAccessoryAddToCart(d.getAccessoryLoggingData(f));g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);a.trigger("UPSELL_ASIN_ADDED_TO_CART",f);r.when("EWC").execute(function(a){a.refresh()})}).fail(function(){g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);d.updateAccessoryStatus(f,
p.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",f)})};d.addAccessoryToCartWithLightningDeal=function(c){d.updateAccessoryStatus(c,p.ADDING);var q=a.$("#attach-accessory-claim-deal-url-"+c).val(),e=a.$("#attach-accessory-claim-deal-params-"+c).val();if(q&&e){e=JSON.parse(b.unescapeJson(e));e.clientId="attach";var f=a.$(h.PANE_ACCESSORY_CSRF_TOKEN).val();a.$.ajax({type:"POST",url:q,data:e,headers:{"X-CSRFToken":f}}).pipe(function(q){var e=q.dealItemStatus&&q.dealItemStatus.customerState;if("1"!==
q.isClaimed&&"INWAITLIST"!==e)return b.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});"INWAITLIST"===e?a.$(h.PANE_ACCESSORY_ADD_SPINNER_PREFIX+c).addClass("aok-hidden"):d.updateAccessoryStatus(c,p.SUCCESS);g.logAccessoryAddToCart(d.getAccessoryLoggingData(c));g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);q=q.dealItemStatus&&q.dealItemStatus.msToCustomerStateExpiry;d.handleLightningDealAddToCart(c,q?q:900,e);a.trigger("UPSELL_ASIN_ADDED_TO_CART",c);r.when("EWC").execute(function(a){a.refresh()});
e={marketplaceId:a.$(h.MARKETPLACE_ID).val(),asin:a.$(h.BASE_ASIN).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val(),languageOfPreference:a.$(h.LANGUAGE_OF_PREFRENCE).val(),isLightningDeal:!0};a.$.post(l.GET_CART_DESCRIPTION,e).pipe(b.pipeJSON).pipe(d.handleCartDescription)}).fail(function(){g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);d.updateAccessoryStatus(c,p.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",c)})}};d.revealHUCFeedback=function(){var b=
a.$(h.PANE_HUC_MESSAGE);if(b.hasClass("aok-hidden")){b.css({position:"absolute",top:0}).removeClass("aok-hidden");var d=b.children().height();0<d&&b.css({marginTop:-1*(d+4)+"px",position:"initial"}).animate({marginTop:"14px"},800)}};d.renderHUCFeedback=function(d){var c=d.find("#hlb-ship-message");d=a.$().add(d.find("#huc-v2-message-group")).add(d.find("#hlb-imb"));k.isCoreFreeShippingMessageEnabled()&&b.elementExists(c)&&a.$(h.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(c.html());0<d.length&&
(c=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e"),c.append(d),c.insertAfter(h.PANE_CART_BLOCK),c.find(".a-declarative a").unwrap(),c.find(".a-declarative span").removeClass("a-color-link huc-cursor-pointer").unwrap(),c.find(".sc-action-quantity").hide(),(c=d.find(".a-alert-heading").text())&&g.logDSSWarningMessage(c))};d.renderBaseAddStatusIcon=function(d){var c;b.elementExists(d.find("#huc-v2-order-row-confirm-text"))?c=d.find("#huc-v2-order-row-confirm-text").hasClass("a-color-error"):
b.elementExists(d.find("#hl-confirm-text"))&&(c=d.find("#hl-confirm-text").hasClass("a-alert-warning"));c=(c?a.$(h.PANE_CART_BASE_ERROR_ALERT):a.$(h.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(h.PANE_CART_BASE_ALERT).remove();a.$(h.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(c);c=d.find(".huc-v2-order-row-image").clone();b.elementExists(c)||(c=d.find(".hlb-product-image").clone());if(1<c.length){c=c.first();var e=a.$('input[name^\x3d"asin"].attach-warranty-input');
0===e.length&&(e=a.$('.abbListItem.mbb__r input[name^\x3d"asin"]'));if(b.elementExists(e))for(var q=0;q<e.length;q++){var f=e[q].value,g=d.find("#huc-v2-order-row-item-"+f);if(g.length){d=b.elementExists(g)?g.find(".huc-v2-order-row-image"):d.find(".hlb-item-link.hlb-asin-"+f+" \x3e img");c=c.add(d.clone());break}}}a.$(h.PANE_CART_BASE_HUC_IMAGE).remove();a.$(h.PANE_CART_BASE_INITIAL_IMAGE).hide().parent().append(c);c.wrap('\x3cdiv class\x3d"huc-image-wrapper"\x3e\x3c/div\x3e')};d.getAccessoryLoggingData=
function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+
b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};d.createAccessoryImpressions=function(){var b=[];a.$(h.PANE_ACCESSORY_ASIN).parent().each(function(c,
e){e=a.$(e);if(e.is(":hidden")||"hidden"===e.css("visibility")||e.prop("data-accessory-seen"))return null;e.prop("data-accessory-seen",!0);b.push(d.getAccessoryLoggingData(c))});return b};d.resetAccessoryImpressions=function(){a.$(h.PANE_ACCESSORY_ASIN).parent().removeProp("data-accessory-seen")};d.initializeAccessoriesDisplay=function(){d.initializeAccessoriesCards();d.initializeAccessoriesTiles();d.initializeCategorizedAccessoriesCards();a.animationFrameDelay(function(){d.resetAccessoryImpressions();
g.logAccessoryImpressions(d.createAccessoryImpressions())})};d.initializeAccessoriesCards=function(){a.$(h.PANE_ACCESSORY_CARD).each(function(){var b=a.$(this),c=b.find(h.PANE_ACCESSORY_CARD_SEE_MORE),e=b.find(h.PANE_ACCESSORY_CARD_SEE_LESS),f=b.find(h.PANE_ACCESSORY_CARD_EXPAND_CONTENT);c.show();e.hide();f.hide();b.removeProp("data-card-expanded");b.removeProp("data-card-previously-expanded");c.click(function(){c.hide();e.show();f.slideDown(400);b.prop("data-card-expanded",!0);b.parent().animate({scrollTop:b.get(0).offsetTop-
30},400);b.prop("data-card-previously-expanded")||(b.prop("data-card-previously-expanded",!0),g.logAccessoryImpressions(d.createAccessoryImpressions()));g.logCount(g.CSM_METRICS.ATTACH_SHOW_MORE)});e.click(function(){e.hide();c.show();f.slideUp(400);b.prop("data-card-expanded",!1);g.logCount(g.CSM_METRICS.ATTACH_SHOW_LESS)})})};d.initializeAccessoriesTiles=function(){r.when("a-truncate").execute(function(b){a.$(h.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});a.$(h.PANE_ACCESSORY_TILE_ITEM).hover(function(){var d=
a.$(this).find(h.PANE_ACCESSORY_TITLE);d.length&&b.get(d.get()).update()})})};d.initializeCategorizedAccessoriesCards=function(){b.elementExists(h.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)&&(a.on("a:expander:attach_see_more_expander:toggle:expand",function(){g.logAccessoryImpressions(d.createAccessoryImpressions())}),a.on("a:expander:attach_category_expander:toggle:expand",function(){g.logAccessoryImpressions(d.createAccessoryImpressions())}))};d.initializeAccessoriesCarousel=function(){r.when("a-truncate",
"a-carousel-framework").execute(function(b,c){if(a.$(h.PANE_ACCESSORY_CAROUSEL).length){a.$(h.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});c.createAll();var e=c.getCarousel(a.$(h.PANE_ACCESSORY_CAROUSEL));e&&(e.attachViewedPages=[1],e.gotoPage(1,{animationDuration:1}),a.on("a:carousel:attach-carousel:change:animating",function(a){a.newValue||(a=e.getAttr("pageNumber"),-1===e.attachViewedPages.indexOf(a)&&(e.attachViewedPages.push(a),g.logAccessoryImpressions(d.createAccessoryImpressions())))}))}})};
d.initializeCoupons=function(){var b;a.$(h.PANE_ACCESSORY_COUPON_BADGE_CLASS).each(function(){var b=a.$(this).text().replace(/\s+/g," ");a.$(this).attr("title",b)});a.on("a:popover:positionUpdated:attach-coupon-popover",d.handleCouponPopoverPositionUpdated);a.on("a:popover:beforeShow:attach-coupon-popover",function(c){c.popover.$trigger.parents(h.PANE_ACCESSORY_TILE_ITEM).addClass("hover");b=d.createCouponPopoverPositionHandler(c);a.$(n).bind("scroll",b);a.$(h.PANE+" \x3e .a-scroller").bind("scroll",
b)});a.on("a:popover:afterHide:attach-coupon-popover",function(d){d.popover.$trigger.parents(h.PANE_ACCESSORY_TILE_ITEM).removeClass("hover");a.$(n).unbind("scroll",b);a.$(h.PANE+" \x3e .a-scroller").unbind("scroll",b)});a.declarative("attach-coupon-checkbox","change",function(b){var c=b.data,e=b.$currentTarget.parents(h.PANE_ACCESSORY_COUPON);c&&c.ajaxClaimUrl?a.$.get(c.ajaxClaimUrl).done(function(){d.handleCouponClaimSuccess(e,c.accessoryItemIndex)}).fail(function(a,b,c){r.logError(Error(c),"Could not clip coupon: ",
"ERROR","attach-desktop-accessories-pane");d.handleCouponClaimError(e)}):(r.logError(Error("Coupon claim URL not available"),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane"),d.handleCouponClaimError(e))})};d.handleCouponPopoverPositionUpdated=function(a){a.popover.$container.css("z-index",6E3)};d.createCouponPopoverPositionHandler=function(a){return function(){a.popover.updatePosition()}};d.handleCouponClaimSuccess=function(a,b){g.logPromotionClaimed(d.getAccessoryLoggingData(b-
1));a.find(h.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(h.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).removeClass("aok-hidden");a=a.parents(h.PANE_ACCESSORY_TILE_ITEM);a.length&&(a.find(h.PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS).addClass("aok-hidden"),a.find(h.PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS).removeClass("aok-hidden"))};d.handleCouponClaimError=function(a){a.find(h.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(h.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).addClass("aok-hidden");
a.find(h.PANE_ACCESSORY_COUPON_ERROR_CLASS).removeClass("aok-hidden")};d.updateLightningDealTimer=function(b){var c=a.$("#attach-accessory-deal-timer-"+b).val()-1;a.$("#attach-accessory-deal-timer-"+b).val(c);var e=d.convertTimeLeftToString(c);a.$("#attach-accessory-deal-timer-string-"+b).text(e);0===c?d.handleDealHasEnded(b):setTimeout(d.updateLightningDealTimer,1E3,b)};d.convertTimeLeftToString=function(a){var b=Math.floor(a/3600),c=Math.floor(a/60)%60;a%=60;return 0>=b?d.appendZeroIfSingleDigit(c)+
":"+d.appendZeroIfSingleDigit(a):b+":"+d.appendZeroIfSingleDigit(c)+":"+d.appendZeroIfSingleDigit(a)};d.appendZeroIfSingleDigit=function(a){return(10>a?"0":"")+a};d.handleDealHasEnded=function(b){a.$(h.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).hasClass("aok-hidden")&&(a.$("#attach-accessory-asin-"+(b+1)).parent().addClass("lightning-deal-ended"),a.$("#attach-accessory-deal-on-waitlist-"+b).addClass("aok-hidden"),a.$("#attach-accessory-deal-has-ended-"+b).removeClass("aok-hidden"))};d.updateLightningDealTimeToCheckoutTimer=
function(b){var c=a.$("#attach-accessory-time-to-checkout-"+b).val()-1;a.$("#attach-accessory-time-to-checkout-"+b).val(c);var e=d.convertTimeLeftToString(c);a.$("#attach-accessory-time-to-checkout-string-"+b).text(e);0===c?(a.$("#attach-accessory-ld-in-cart-details-"+b).addClass("aok-hidden"),a.$(h.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).addClass("aok-hidden"),a.$("#tile-add-accessory-badge-"+b).addClass("aok-hidden"),a.$(h.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).removeClass("aok-hidden"),a.$("#attach-accessory-deal-availability-details-"+
b).removeClass("aok-hidden")):setTimeout(d.updateLightningDealTimeToCheckoutTimer,1E3,b)};d.handleLightningDealAddToCart=function(b,c,e){a.$("#attach_add_accessory-button-row-"+b).addClass("aok-hidden");"INWAITLIST"===e?a.$("#attach-accessory-deal-on-waitlist-"+b).removeClass("aok-hidden"):(a.$("#attach-accessory-deal-availability-details-"+b).addClass("aok-hidden"),a.$("#attach-accessory-time-to-checkout-"+b).val(c/1E3),d.updateLightningDealTimeToCheckoutTimer(b),a.$("#attach-accessory-ld-in-cart-details-"+
b).removeClass("aok-hidden"))};d.initializeLightningDealStatusRefresher=function(c){var e=a.$("#attach-accessory-claim-deal-params-"+c).val(),f=JSON.parse(b.unescapeJson(e));a.$("#attach-accessory-deal-has-ended-"+c).hasClass("aok-hidden")&&(e=[{dealID:f.dealId}],e=JSON.stringify({requestMetadata:{marketplaceID:a.$(h.MARKETPLACE_ID).val(),clientID:"goldbox_udp",sessionID:a.$("#attach-sessionId").val(),customerID:a.$("#attach-customerId").val()},dealTargets:e,responseSize:"STATUS_ONLY",itemResponseSize:"NONE"}),
a.$.ajax({type:"POST",url:"/xa/dealcontent/v2/GetDealStatus",dataType:"json",headers:{"cache-control":"no-cache"},data:e,success:function(a){a=a.dealStatus[f.dealId];var b=Number.MAX_VALUE;a&&d.updateLightningDealInfo(c,a.dealState,a.percentClaimed)&&setTimeout(d.initializeLightningDealStatusRefresher,b<a.msCacheTtl?b:3E4,c)}}))};d.updateLightningDealInfo=function(b,c,e){if("AVAILABLE"!==c&&"WAITLIST"!==c)return d.handleDealHasEnded(b),!1;var f=a.$("#attach_add_accessory_button_"+b+"-announce");"WAITLIST"===
c?f.html(a.$("#attach-accessory-join-waitlist-string").html()):"AVAILABLE"===c&&f.html(a.$("#attach-accessory-add-to-cart-string").html());a.$("#attach-accessory-percent-claimed-"+b).text(e);a.$("#attach-accessory-deal-progress-bar-width-"+b).width(e+"%");return!0};return d});"use strict";r.when("A","attach-common","attach-weblabs").register("attach-desktop-side-sheet",function(a,b,k){var e={},g=[],m=-1,d,c,t,f,r,v=e.Selectors={PLACEHOLDER:"#attach-dss-placeholder",SHEET:"#attach-desktop-sideSheet",
LIGHTBOX:"#attach-popover-lgtbox.attach-popover"};e.transitionDuration=500;e.onKeyDown=function(a){27===a.which&&e.next()};e.initialize=function(){g=[];b.elementExists(v.SHEET)?e.$container=a.$(v.SHEET):(e.$container=a.$('\x3cdiv id\x3d"attach-desktop-sideSheet" class\x3d"a-section attach-desktop-sideSheet"\x3e\x3c/div\x3e'),e.$container.addClass("aok-hidden"),e.$container.appendTo(v.PLACEHOLDER));b.elementExists(v.LIGHTBOX)||(f=a.$("\x3cdiv id\x3d'attach-popover-lgtbox' class\x3d'a-declarative attach-popover a-modal' data-action\x3d'a-popover-floating-close' style\x3d'z-index: 1008; opacity: 0.4; cursor: pointer'\x3e\x3c/div\x3e"),
f.hide(),f.appendTo(v.PLACEHOLDER),f.click(e.next));a.$(document).unbind("keydown",e.onKeyDown);a.$(document).keydown(e.onKeyDown);d=function(){};c=function(){};t=!0};e.setFailureHandler=function(a){d=a};e.setCloseHandler=function(a){c=a};e.fail=function(a,b){d(a,b)};e.addPane=function(a){g.push(a)};e.removePane=function(a){a=g.indexOf(a);-1<a&&g.splice(a,1)};e.getPaneIndex=function(a){return g.indexOf(a)};e.insertPane=function(a,b){b===x&&(b=g.length);g.splice(b,0,a);t=!0};e.hasPane=function(a){return-1<
e.getPaneIndex(a)};e.next=function(){m+1===g.length?(f.hide(),e.$container.animate({right:r},{duration:e.transitionDuration,complete:function(){g[m].hide();m=-1;c()}}),n.ue&&n.ue.count&&n.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE",(n.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE")||0)+1),a.trigger("HIDE_SIDE_SHEET")):-1!==m&&(g[m].hide(),g[m+1].show(),m+=1)};e.show=function(){if(t){t=!1;var b=a.$.map(g,function(a){return a.load(e)});a.$.when.apply(a.$,b).fail(e.fail).done(function(){a.$.each(g,function(a,
b){b.setup(e)});e.show()})}else m=0,g[m].show(),r=e.$container.css("right"),e.$container.removeClass("aok-hidden"),e.$container.animate({right:"0"},e.transitionDuration,"linear"),f.show(),n.ue&&n.ue.count&&(b=a.$("#attach-customerId").val()?"ATTACH_DSS_SHOW_HAS_CUSTOMER_ID":"ATTACH_DSS_SHOW_NO_CUSTOMER_ID",n.ue.count(b,(n.ue.count(b)||0)+1),b="true"===a.$("#attach-is-prime-member").val()?"ATTACH_DSS_IS_PRIME_MEMBER":"ATTACH_DSS_IS_NOT_PRIME_MEMBER",n.ue.count(b,(n.ue.count(b)||0)+1))};e.isEmpty=function(){return 0===
g.length};return e});"use strict";r.when("A","attach-common","attach-weblabs","attach-logging","attach-maple","attach-desktop-warranty-pane","attach-desktop-accessories-pane","attach-desktop-side-sheet","attach-variant-registration").register("attach-desktop",function(a,b,k,e,g,m,d,c,t){var f={},w,v=n.ue,u=!0,l=f.Events={CLICK:"click",ATTACH_ATC_CLICK_NAMESPACE:"click.attachDSS",WARRANTY_SI_CLICK_NAMESPACE:"click.siatc",VAS_SI_CLICK_NAMESPACE:"click.lsatc",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",
LD_CLAIM_ERROR:"deals_claimDealError"},h=f.Endpoints={ERROR_500_URL:"/gp/errors/500.html",WARRANTY_SI_CHECK:"/gp/si/util/is-si-with-triggers.html"},p=f.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",INSTALLMENTS_BUTTON:"#installments-button",ASIN:"#ASIN",QUANTITY:"#quantity",BASE_ITEM_PRICE_DECIMAL:"#attach-base-product-price",BASE_ITEM_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATTACH_ASIN_LIST:"#attach-asin-list",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",ATTACH_BASE_ASIN:"#attach-baseAsin",
MBB_WARRANTY_ITEM:"#abbWrapper .abbListItem input[type\x3dcheckbox]",WTY_TWISTER_SELECTED_GROUP:".warranty-twister-selected-box-group",WTY_TWISTER_WTY_OPTION:".warranty-twister-box-group-warranty-option",LD_BUY_BOX:"#dealsAccordionRow",LD_ATC_BUTTON:".gb-btn-atc"},q=f.Classes={ATTACH_DSS_ATC:"attach-dss-atc"},z=-1,C=function(){a.off(l.LD_CLAIM_SUCCESS,C);a.off(l.LD_CLAIM_ERROR,x);b.selectedBaseLightningDeal=!0;c.setCloseHandler(f.setupAddToCartButton);f.handleLdAddToCartClick();r.when("attach-lightning-deals-desktop").execute(function(a){a.handleDealClaim()})},
x=function(){a.off(l.LD_CLAIM_ERROR,x);a.off(l.LD_CLAIM_SUCCESS,C);a.$(p.LD_ATC_BUTTON).bind(l.CLICK,A)},A=function(){a.$(p.LD_ATC_BUTTON).unbind(l.CLICK,A);a.on(l.LD_CLAIM_SUCCESS,C);a.on(l.LD_CLAIM_ERROR,x)};f.initialize=function(){if(!b.elementExists(c.Selectors.PLACEHOLDER)){if(0===k.getAllWeblabsToTriggerClientSide().length)return!1;u=!1}f.setupDependencies();f.setupSideSheet();f.setupAddToCartButton()};f.setupDependencies=function(){var b=a.$(p.ATTACH_MARKETPLACE_ID).val();e.initialize(e.FEATURES.DSS,
b);e.setPayloadBuilder(function(){return{baseAsin:a.$(p.ASIN).val(),baseItemPriceDecimal:parseFloat(a.$(p.BASE_ITEM_PRICE_DECIMAL).val())||null,baseItemCurrencySymbol:a.$(p.BASE_ITEM_CURRENCY_SYMBOL).val()||null,quantity:Number(a.$(p.QUANTITY).val())||1}});g.initialize();r.when("attach-external-atc-interceptor").execute(function(a){w=a;w.enableModule()})};f.setupSideSheet=function(){c.initialize();c.setFailureHandler(f.failure);!k.isWarrantyPaneSuppressed()&&b.hasWarranty()?c.addPane(m):d.setShouldIncludeMaple(!0);
!k.servicesInterstitialDeprecated()||b.hasAccessories()?(c.addPane(d),c.setCloseHandler(f.setupAddToCartButton)):c.setCloseHandler(f.failureTransitionToHUC)};f.setupAddToCartButton=function(){a.$(document.body).delegate(p.ADD_TO_CART_BUTTON,l.ATTACH_ATC_CLICK_NAMESPACE,f.handleAddToCartClick);a.$(p.ADD_TO_CART_BUTTON).prop("type","button").addClass(q.ATTACH_DSS_ATC);k.isInstallmentsDssIntegrationEnabled()?(a.$(document.body).delegate(p.INSTALLMENTS_BUTTON,l.ATTACH_ATC_CLICK_NAMESPACE,f.handleAddToCartClick),
a.$(p.INSTALLMENTS_BUTTON).prop("type","button").addClass(q.ATTACH_DSS_ATC),a.$(p.INSTALLMENTS_BUTTON).click(function(){v&&v.trigger&&v.trigger("DP_INSTALLMENTS_DSS_231673","T1")})):a.$(p.INSTALLMENTS_BUTTON).click(function(){v&&v.trigger&&v.trigger("DP_INSTALLMENTS_DSS_231673","C")});k.isAttachLDSupportEnabled()&&b.elementExists(p.LD_BUY_BOX)&&(a.$(p.LD_ATC_BUTTON).bind(l.CLICK,A).addClass(q.ATTACH_DSS_ATC),!k.isWarrantyPaneSuppressed()&&b.hasWarranty()&&!c.hasPane(m)&&-1<z&&c.insertPane(m,z),e.logCount(e.CSM_METRICS.ATTACH_BASE_LD_PRESENT));
e.logCount(e.CSM_METRICS.ATTACH_SIDE_SHEET_CLOSE)};f.failure=function(a,c){switch(a){case b.FailureModes.ERROR_500:f.failureError500();break;case b.FailureModes.RESUBMIT_BUY_BOX:f.failureResubmitBuyBox();break;case b.FailureModes.UNBIND_ATC:f.failureUnbindATC();break;case b.FailureModes.REBIND_ATC:f.failureRebindATC();break;default:case b.FailureModes.TRANSITION_TO_HUC:f.failureTransitionToHUC()}};f.failureError500=function(){n.location=h.ERROR_500_URL};f.failureResubmitBuyBox=function(){k.isAttachLDSupportEnabled()&&
b.selectedBaseLightningDeal?f.failureRebindATC():(f.failureUnbindATC(),b.buyButton.click())};f.failureUnbindATC=function(){a.$(document.body).undelegate(p.ADD_TO_CART_BUTTON,l.ATTACH_ATC_CLICK_NAMESPACE);a.$(p.ADD_TO_CART_BUTTON).prop("type","submit");k.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).undelegate(p.INSTALLMENTS_BUTTON,l.ATTACH_ATC_CLICK_NAMESPACE),a.$(p.INSTALLMENTS_BUTTON).prop("type","submit"))};f.failureTransitionToHUC=function(){if(k.isAttachLDSupportEnabled()&&b.selectedBaseLightningDeal)return f.failureUnbindATC();
k.servicesInterstitialDeprecated()?a.$(document.body).undelegate(p.ADD_TO_CART_BUTTON,l.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(p.ADD_TO_CART_BUTTON,l.WARRANTY_SI_CLICK_NAMESPACE);k.isInstallmentsDssIntegrationEnabled()&&(k.servicesInterstitialDeprecated()?a.$(document.body).undelegate(p.INSTALLMENTS_BUTTON,l.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(p.INSTALLMENTS_BUTTON,l.WARRANTY_SI_CLICK_NAMESPACE));f.failureResubmitBuyBox()};f.failureRebindATC=function(){f.setupAddToCartButton()};
f.handleAddToCartClick=function(d){b.buyButton=a.$(d.target);a.$(document.body).undelegate(p.ADD_TO_CART_BUTTON,l.ATTACH_ATC_CLICK_NAMESPACE);k.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).undelegate(p.INSTALLMENTS_BUTTON,l.ATTACH_ATC_CLICK_NAMESPACE),b.getAtcForm().append(b.buyButton.filter("input").clone().attr("type","hidden")));k.isAttachLDSupportEnabled()&&b.elementExists(p.LD_BUY_BOX)&&a.$(p.LD_ATC_BUTTON).unbind(l.CLICK,A);k.isAttachLDSupportEnabled()&&!b.selectedBaseLightningDeal&&
k.servicesInterstitialDeprecated()&&!b.hasAccessories()&&c.setCloseHandler(f.failureTransitionToHUC);a.$.when().pipe(f.checkWarranty).pipe(f.checkClientSideWeblabTriggering).pipe(f.checkFeatureExists).pipe(f.show).fail(f.failure);if(u)return d.preventDefault(),d.stopImmediatePropagation(),!1};f.handleLdAddToCartClick=function(){a.$(document.body).undelegate(p.ADD_TO_CART_BUTTON,l.ATTACH_ATC_CLICK_NAMESPACE);a.$(p.LD_ATC_BUTTON).unbind(l.CLICK,A);a.$.when().pipe(f.checkWarranty).pipe(f.checkClientSideWeblabTriggering).pipe(f.checkFeatureExists).pipe(f.show).fail(f.failure)};
f.checkFeatureExists=function(){if(f.shouldSuppressForFeatureNotPresent())return k.isAttachLDSupportEnabled()&&b.selectedBaseLightningDeal?(a.trigger("HIDE_SIDE_SHEET"),b.selectedBaseLightningDeal=!1,b.reject(b.FailureModes.REBIND_ATC)):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_FEATURE_DOES_NOT_EXIST"})};f.checkWarranty=function(){if(!k.isWarrantyPaneSuppressed())if(k.isAttachLDSupportEnabled()&&b.selectedBaseLightningDeal&&(!k.isWarrantyLDSupportEnabled()||b.isMultiQuantityDeal()||
!a.$("#attach-warranty-ld #attach-warranty-asin").val()))z=c.getPaneIndex(m),c.removePane(m);else if(f.shouldSuppressForWarrantyInMbb())c.removePane(m),d.setShouldIncludeMaple(!0),e.logCount("ATTACH_DSS_SUPPRESSED_MBB_WARRANTY_CHECKED",1);else if(k.servicesInterstitialDeprecated()&&f.shouldSuppressforMultiQuantityMonthlyWarranty())c.removePane(m),d.setShouldIncludeMaple(!0),e.logCount("ATTACH_DSS_SUPPRESSED_MULTI_QUANTITY_MONTHLY_WARRANTY",1);else if(b.hasWarranty())return a.$.get(h.WARRANTY_SI_CHECK).pipe(f.handleSICheck,
f.handleSIFailure)};f.checkClientSideWeblabTriggering=function(){k.triggerClientSideWeblabs();if(!k.servicesInterstitialDeprecated()&&!b.elementExists(p.ATTACH_ASIN_LIST))return b.reject(b.FailureModes.UNBIND_ATC,{count:"ATTACH_DSS_SUPPRESSED_EMPTY_ASIN_LIST"})};f.handleSICheck=function(a){if(!a)return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"});a.suppressSi&&(c.removePane(m),d.setShouldIncludeMaple(!0),e.logCount("ATTACH_DSS_SUPPRESSED_SI",1))};f.handleSIFailure=
function(){return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"})};f.shouldSuppressForFeatureNotPresent=function(){return k.servicesInterstitialDeprecated()?!b.elementExists(c.Selectors.PLACEHOLDER)||c.isEmpty():!b.elementExists(c.Selectors.PLACEHOLDER)||!b.elementExists(p.ATTACH_ASIN_LIST)||!b.elementExists(p.ATTACH_MARKETPLACE_ID)||!b.elementExists(p.ATTACH_BASE_ASIN)};f.shouldSuppressForWarrantyInMbb=function(){return k.isWarrantyTwisterPlusDesktopEnabled()?
0<a.$(p.MBB_WARRANTY_ITEM).filter(":checked").length||0<a.$(p.WTY_TWISTER_SELECTED_GROUP).filter(p.WTY_TWISTER_WTY_OPTION).length:0<a.$(p.MBB_WARRANTY_ITEM).filter(":checked").length};f.shouldSuppressforMultiQuantityMonthlyWarranty=function(){var c=Number(a.$(p.QUANTITY).val())||1;return b.hasMonthlyWarranty()&&1<c};f.show=function(){c.show()};return f});r.when("A","attach-desktop","attach-weblabs","ready").execute("attach-desktop-main",function(a,b,k){b.initialize();a.on("a:pageUpdate",a.debounce(function(){b.initialize();
a.trigger("attach:dss:initialized")},300))});"use strict";r.when("A","attach-desktop","dp-util-cookie","cf").execute(function(a,b,k){"000-0000000-8675309"===a.$("#attach-sessionId").val()&&a.$("#attach-sessionId").val(k("session-id"))});"use strict";r.when("A","attach-logging","ready").register("attach-categorized-cards",function(a,b){var k=self.Selectors={CATEGORIZED_ACCESSORIES_PANE:"#attach-categorized-accessories",CATEGORIZED_ACCESSORIES_SEE_MORE:".category-see-more",CATEGORIZED_ACCESSORIES_SEE_LESS:".category-see-less",
CATEGORIZED_CARD_EXPAND_CONTENT:".card-expand-content",CATEGORIZED_CARD_EXPANDABLE:".card-expandable",CATEGORIZED_CARD_CATEGORY:".card-category"},e=self.Constants={CATEGORY_CARD_EXPANDED:"category-card-expanded",CATEGORY_CARD_PREVIOUSLY_EXPANDED:"category-card-previously-expanded"};self.initializeCategorizedCards=function(){a.$(k.CATEGORIZED_ACCESSORIES_PANE+k.CATEGORIZED_CARD_EXPANDABLE+" "+k.CATEGORIZED_CARD_CATEGORY).each(function(){var g=a.$(this),m=g.find(k.CATEGORIZED_ACCESSORIES_SEE_MORE),
d=g.find(k.CATEGORIZED_ACCESSORIES_SEE_LESS),c=g.find(k.CATEGORIZED_CARD_EXPAND_CONTENT);m.show();d.hide();c.hide();g.removeProp(e.CATEGORY_CARD_EXPANDED);g.removeProp(e.CATEGORY_CARD_PREVIOUSLY_EXPANDED);m.click(function(){m.hide();d.show();c.slideDown(400);g.prop(e.CATEGORY_CARD_EXPANDED,!0);g.parent().animate({scrollTop:g.get(0).offsetTop-30},400);b.logCount(b.CSM_METRICS.ATTACH_SHOW_MORE)});d.click(function(){d.hide();m.show();c.slideUp(400);g.prop(e.CATEGORY_CARD_EXPANDED,!1);b.logCount(b.CSM_METRICS.ATTACH_SHOW_LESS)})})};
return self});"use strict";r.when("A","attach-logging").register("attach-secondary-side-sheet",function(a,b,k){var e=a.$;k={name:"secondary-side-sheet"};var g={},m=k.Utilities={},d,c,n=k.AuiConstants={AUI_SPINNER:".a-spinner-wrapper",AOK_HIDDEN:"aok-hidden"},f=k.Htmltags={LI:"li",IMG:"img",IMG_SRC:"src",IMG_ALT:"alt",INPUT:"input",DATA_ASININDEX:"asinindex"},r=k.CssProsVal={CSS_DISPLAY:"display",CSS_DISPLAY_INLINE_BLOCK:"inline-block",CSS_WIDTH:"width",CSS_HEIGHT:"height"},v=k.Declarative={ATTACH_ACCESSORY_MINI_DP:"attach_accessory_mini_dp",
MINI_DP_ATC:"mini_dp_add_to_cart",MINI_DP_BACK_BUTTON:"mini_dp_back_button",MINI_DP_NO_THANKS:"mini_dp_no_thanks"},u=k.Events={UPSELL_ASIN_ADDED_TO_CART:"UPSELL_ASIN_ADDED_TO_CART",UPSELL_ASIN_NOT_ADDED_TO_CART:"UPSELL_ASIN_NOT_ADDED_TO_CART",HIDE_SIDE_SHEET:"HIDE_SIDE_SHEET",CLICK:"click",ATTACH_LOADED_ACCESSORIES_PANE_SUCCESSFULLY:"LOADED_ACCESSORIES_PANE_SUCCESSFULLY",RESET_SECONDARY_SIDE_SHEET_MODULE:"RESET_SECONDARY_SIDE_SHEET_MODULE"},l=k.Selectors={PANE_ACCESORIES_CARD:"#attach-accessories",
PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_DISPLAY:".attach-accessory-display-row, .attach-accessory-tile",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",BASE_ASIN:"#ASIN",SECONDARY_SIDE_SHEET:".secondary-side-sheet",BACK_BUTTON:".back-button",MINI_DP_VIEW:".miniDp-view",MINI_DP_RESPONSE:".miniDpResponse",ASIN_TITLE:".asin-title",
ASIN_REVIEW:".asin-review",ASIN_REVIEW_ROW:".asin-review-row",PRICE_OFFER_ROW:".price-offer-row",ASIN_OFFER_PRICE:".asinOfferPrice",PRODUCT_IMAGE_MAIN:".productImageMain",PRODUCT_IMAGES_LIST:".productImagesList",FEATURE_BULLET_POINTS:".featureBulletPoints",MINI_DP_PRODUCT_FEATURES:".mini_dp_product_features",MINI_DP_IMG_THUMBNAIL_LIST:".imgThumbnailList",MINI_DP_ACTION_BUTTONS:".miniDp_action_buttons",MINI_DP_ACTION_BUTTONS_STATES:".miniDp-action-buttons-states",MINI_DP_ADD_ACCESSORY_ALERT:"#miniDp_attach_add_accessory_alert",
MINI_DP_ADD_ACCESSORY_ERROR:"#miniDp_attach_add_accessory_error",MINI_DP_ADD_TO_CART_RETRY:".attach-add-to-cart-retry",MINI_DP_ADD_ACCESSORY_ASIN:"#attach-minidp-accessory-asin"},h=k.RefTags={MINI_DP_SUCCESSFUL_LOAD:"dp_atch_dss_ss_ce_",MINI_DP_ADD_ACCESSORY_CLICK:"dp_atch_dss_atc_ce_",MINI_DP_BACK_BUTTON_CLICK:"dp_atch_dss_ss_back_ce_",MINI_DP_NO_THANKS_CLICK:"dp_atch_dss_ss_nt_ce_",MINI_DP_ADD_TO_CART_SUCCESS:"dp_atch_dss_atc_success_ce_",MINI_DP_ADD_TO_CART_FAILURE:"dp_atch_dss_atc_fail_ce_"},
p=k.MiniDpAjax={MINI_DP_AJAX_ENDPOINT:"/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?",MINI_DP_AJAX_TAB:"\x26activeTab\x3d0",TEXT_STATUS_SUCCESS:200};m.showHideSpinner=function(b){b?a.$(n.AUI_SPINNER).show():a.$(n.AUI_SPINNER).hide()};m.isCategoryView=function(){return a.$(l.PANE_CATEGORIZED_ACCESSORIES_CARD).length?!0:!1};m.showSecondarySideSheet=function(b){b?(m.isCategoryView()?a.$(l.PANE_CATEGORIZED_ACCESSORIES_CARD).hide():a.$(l.PANE_ACCESORIES_CARD).hide(),a.$(l.SECONDARY_SIDE_SHEET).slideDown(1E3),
m.showHideSpinner(!0),a.$(l.BACK_BUTTON).show(),a.$(l.SECONDARY_SIDE_SHEET+" "+l.MINI_DP_VIEW).hide()):(m.isCategoryView()?a.$(l.PANE_CATEGORIZED_ACCESSORIES_CARD).slideDown(2E3):a.$(l.PANE_ACCESORIES_CARD).slideDown(2E3),a.$(l.BACK_BUTTON).hide(),a.$(l.SECONDARY_SIDE_SHEET).hide())};k.init=function(){a.declarative(v.ATTACH_ACCESSORY_MINI_DP,u.CLICK,function(k){function q(){e(l.MINI_DP_VIEW+" "+l.MINI_DP_IMG_THUMBNAIL_LIST+" "+f.LI).hover(function(a){a=e(this).find(f.IMG).attr(f.IMG_SRC);e(l.MINI_DP_VIEW+
" "+l.PRODUCT_IMAGE_MAIN+" "+f.IMG).attr(f.IMG_SRC,a);b.logCount(b.CSM_METRICS.MINI_DP_CAROUSEL_THUMBNAIL_CHANGE)})}function t(){m.showSecondarySideSheet(!1);var c=e(l.SECONDARY_SIDE_SHEET).data(f.DATA_ASININDEX);c in g||(a.$(l.PANE_ACCESSORY_ADD_BUTTON_PREFIX+c).find(f.INPUT).click(),g[c]=!0,b.logSecondarySheetRefTag(h.MINI_DP_ADD_ACCESSORY_CLICK+B+"_"+y.upsellasin),b.logCount(b.CSM_METRICS.MINI_DP_ATC),b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME))}function w(){var a=e(l.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+
B).css(r.CSS_DISPLAY),b=e(l.PANE_ACCESSORY_ADD_ERROR_PREFIX+B).css(r.CSS_DISPLAY);a===r.CSS_DISPLAY_INLINE_BLOCK?(e(l.MINI_DP_ACTION_BUTTONS_STATES+" "+l.MINI_DP_ADD_ACCESSORY_ALERT).removeClass(n.AOK_HIDDEN),e(l.MINI_DP_ACTION_BUTTONS_STATES+" "+l.MINI_DP_ADD_ACCESSORY_ERROR).addClass(n.AOK_HIDDEN),e(l.MINI_DP_ACTION_BUTTONS).addClass(n.AOK_HIDDEN)):b===r.CSS_DISPLAY_INLINE_BLOCK?(e(l.MINI_DP_ACTION_BUTTONS_STATES+" "+l.MINI_DP_ADD_ACCESSORY_ERROR).removeClass(n.AOK_HIDDEN),e(l.MINI_DP_ACTION_BUTTONS_STATES+
" "+l.MINI_DP_ADD_ACCESSORY_ALERT).addClass(n.AOK_HIDDEN),e(l.MINI_DP_ACTION_BUTTONS).addClass(n.AOK_HIDDEN)):(e(l.MINI_DP_ACTION_BUTTONS_STATES+" "+l.MINI_DP_ADD_ACCESSORY_ALERT).addClass(n.AOK_HIDDEN),e(l.MINI_DP_ACTION_BUTTONS_STATES+" "+l.MINI_DP_ADD_ACCESSORY_ERROR).addClass(n.AOK_HIDDEN),e(l.MINI_DP_ACTION_BUTTONS).removeClass(n.AOK_HIDDEN))}function A(){a.$(l.MINI_DP_VIEW+" "+l.ASIN_TITLE).html(F);a.$(l.MINI_DP_VIEW+" "+l.ASIN_REVIEW).html(E);a.$(l.MINI_DP_VIEW+" "+l.PRICE_OFFER_ROW).html(G);
a.$(l.MINI_DP_VIEW+" "+l.ASIN_OFFER_PRICE).html(H);var b=a.$(l.MINI_DP_RESPONSE+" "+l.PRODUCT_IMAGES_LIST+" "+f.LI+" "+f.IMG);b=a.$(b).map(function(){return a.$(this).attr(f.IMG_SRC)});e(l.MINI_DP_VIEW+" "+l.PRODUCT_IMAGE_MAIN+" "+f.IMG).attr(f.IMG_SRC,b[0]);e(l.MINI_DP_VIEW+" "+l.PRODUCT_IMAGE_MAIN+" "+f.IMG).attr(f.IMG_ALT,b[0]);b=e(l.MINI_DP_RESPONSE+" "+l.PRODUCT_IMAGES_LIST).clone();e(l.MINI_DP_VIEW+" "+l.MINI_DP_IMG_THUMBNAIL_LIST).html(b[0]);q();e(l.MINI_DP_VIEW+" "+l.MINI_DP_IMG_THUMBNAIL_LIST+
" "+f.IMG).each(function(){e(this).removeAttr(r.CSS_WIDTH).removeAttr(r.CSS_HEIGHT)});b=e(l.MINI_DP_RESPONSE+" "+l.FEATURE_BULLET_POINTS).clone();e(l.MINI_DP_VIEW+" "+l.MINI_DP_PRODUCT_FEATURES).html(b);w()}a.$(k.$target).attr("id");var D=a.$(k.$declarativeParent);k=a.$(k.$target).closest(l.PANE_ACCESSORY_DISPLAY);var y=a.$(D).data(v.ATTACH_ACCESSORY_MINI_DP),F=y.title,E=a.$(k).find(l.ASIN_REVIEW_ROW).html(),G=a.$(k).find(l.PRICE_OFFER_ROW).html(),H=y.offerprice,B=y.asinIndex;D=y.marketplaceid;c=
B;d=y.upsellasin;e(l.MINI_DP_ADD_ACCESSORY_ASIN).val(d);e(l.SECONDARY_SIDE_SHEET).data(f.DATA_ASININDEX,B);m.showSecondarySideSheet(!0);b.logCount(b.CSM_METRICS.MINI_DP_OPEN);b.beginLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME);a.ajax(p.MINI_DP_AJAX_ENDPOINT+"asin\x3d"+y.upsellasin+"\x26marketplaceId\x3d"+D+"\x26offerId\x3d"+y.offerlistingid+p.MINI_DP_AJAX_TAB,{method:"get",success:function(c,d,f){f.http.status===p.TEXT_STATUS_SUCCESS&&c!==x&&(a.$(l.SECONDARY_SIDE_SHEET+" "+l.MINI_DP_RESPONSE).html(c),
A(),m.showHideSpinner(!1),a.$(l.SECONDARY_SIDE_SHEET+" "+l.MINI_DP_VIEW).show());a.declarative(v.MINI_DP_ATC,u.CLICK,t);e(l.MINI_DP_VIEW+" "+l.MINI_DP_ADD_TO_CART_RETRY).unbind(u.CLICK).bind(u.CLICK,t);b.logSecondarySheetRefTag(h.MINI_DP_SUCCESSFUL_LOAD+B+"_"+y.upsellasin)},error:function(a,b,c){m.showSecondarySideSheet(!1)}})});a.declarative(v.MINI_DP_BACK_BUTTON,u.CLICK,function(a){m.showSecondarySideSheet(!1);b.logSecondarySheetRefTag(h.MINI_DP_BACK_BUTTON_CLICK+c+"_"+d);b.logCount(b.CSM_METRICS.MINI_DP_BACK);
b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME)});a.declarative(v.MINI_DP_NO_THANKS,u.CLICK,function(a){m.showSecondarySideSheet(!1);b.logSecondarySheetRefTag(h.MINI_DP_NO_THANKS_CLICK+c+"_"+d);b.logCount(b.CSM_METRICS.MINI_DP_CANCEL);b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME)});a.on(u.UPSELL_ASIN_ADDED_TO_CART,function(a){a in g||(g[a]=!0);b.logSecondarySheetRefTag(h.MINI_DP_ADD_TO_CART_SUCCESS+c+"_"+d);b.endLatencyCapture(b.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY)});a.on(u.UPSELL_ASIN_NOT_ADDED_TO_CART,
function(a){a in g&&delete g[a];b.logSecondarySheetRefTag(h.MINI_DP_ADD_TO_CART_FAILURE+c+"_"+d)});a.on(u.HIDE_SIDE_SHEET,function(){m.showSecondarySideSheet(!1)})};k.resetSecondarySideSheet=function(){g={}};a.on(u.ATTACH_LOADED_ACCESSORIES_PANE_SUCCESSFULLY,k.init);a.on(u.RESET_SECONDARY_SIDE_SHEET_MODULE,k.resetSecondarySideSheet);return k})});